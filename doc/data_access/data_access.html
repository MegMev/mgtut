<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Data Access: Transient Event Store</title>
<meta name="author" content="Yong Zhou"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/black.css" id="theme"/>

<link rel="stylesheet" href="./local.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/plugin/highlight/zenburn.css"/>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide">
<h1 class="title">Data Access: Transient Event Store</h1><em></em><br><br>Yong Zhou<br>
</section>

<section>
<section id="slide-1">
<h2 id="1"><span class="section-number-2">1.</span> Test</h2>
<div class="org-src-container">

<pre><code class="artist" >&lt;-cursor right here
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-2">
<h2 id="2"><span class="section-number-2">2.</span> Simulation output</h2>

<div id="orgc434e2a" class="figure">
<p><img src="event_data_tree.png" alt="event_data_tree.png" />
</p>
</div>

</section>
</section>
<section>
<section id="slide-3">
<h2 id="3"><span class="section-number-2">3.</span> Link to this presentation</h2>
<p>
<a href="https://github.com/MegMev/mgtut/blob/main/doc/data_access.html">https://github.com/MegMev/mgtut/blob/main/doc/data_access.html</a>
</p>

</section>
</section>
<section>
<section id="slide-4">
<h2 id="4"><span class="section-number-2">4.</span> Seperate repository for tutorial</h2>
<p>
<a href="https://github.com/MegMev/mgtut.git">https://github.com/MegMev/mgtut.git</a>
</p>

<ul>
<li>New examples will be added here.</li>
<li>Also acts as a start point for algorithm development</li>

</ul>

</section>
</section>
<section>
<section id="slide-5">
<h2 id="5"><span class="section-number-2">5.</span> Task last week</h2>
<ul>
<li>noise adding: <a href="https://github.com/MegMev/mgtut/blob/main/examples/components/MgTut_AddNoise.cpp">MgTut_AddNoise</a></li>
<li>draw the energy hist: <a href="https://github.com/MegMev/mgtut/blob/main/examples/components/MgTut_DrawCaloEnergy.cpp">MgTut_DrawCaloEnergy</a></li>
<li>job option: <a href="https://github.com/MegMev/mgtut/blob/main/examples/options/tut_addnoise.py">tut_addnoise.py</a></li>

</ul>

<p>
Any issues?
</p>

</section>
</section>
<section>
<section id="slide-6">
<h2 id="6"><span class="section-number-2">6.</span> Event Data Access in Gaudi/k4megat</h2>
<div class="outline-text-2" id="text-6">
</div>
</section>
<section id="slide-orgba50a80">
<h3 id="orgba50a80">Two forms of event data:</h3>
<ul>
<li>on disk: Persistency (ROOT file)</li>
<li>on memory: Transient (during job running)</li>

</ul>

</section>
<section id="slide-orga718a76">
<h3 id="orga718a76">Transient Event Store (TES) of Gaudi:</h3>
<ul>
<li>Acts as a registry book of all event data during job run:
<ul>
<li>Generated by the simulation</li>
<li>Loaded from disk</li>
<li>Output from algorithms</li>

</ul></li>
<li>The record book is shared by all algorithms</li>
<li>tree structure support:
<ul>
<li>top level in k4megat: '/Event'</li>
<li>use relative path in job option: 'xxx/yyy' -&gt; '/Event/xxx/yyy'</li>

</ul></li>
<li>PodioDataSvc in k4megat's Event Data Store that handles EDM4hep</li>
<li>PodioInput is the algorithm that loads data from ROOT file
<ul>
<li>registered under '/Event' hard coded</li>

</ul></li>
<li>PodioOutput is the algorithm that saves data in TES into ROOT file
<ul>
<li>flattened tree structure: '/Event/xxx/yyy/zzz' -&gt; 'zzz' in 'events' tree</li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-7">
<h2 id="7"><span class="section-number-2">7.</span> Chaining example</h2>
<p>
An example showing how to chain several algorithms and how later algorithm can access output
from any previous algorithms (a big plus against REST).
</p>

<p>
job option: <a href="https://github.com/MegMev/mgtut/blob/main/examples/options/tut_chain.py">https://github.com/MegMev/mgtut/blob/main/examples/options/tut_chain.py</a>
</p>


<div id="orgcb15637" class="figure">
<p><img src="data_access.png" alt="data_access.png" />
</p>
</div>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/highlight/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/gh/rajgoel/reveal.js-plugins/chalkboard/plugin.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: false,
fragmentInURL: false,
hashOneBasedIndex: false,
pdfSeparateFragments: true,
overview: true,
width: 1700,
height: 1000,

transition: 'fade',
transitionSpeed: 'default',

// Plugins with reveal.js 4.x
plugins: [ RevealHighlight, RevealChalkboard ],

// Optional libraries used to extend reveal.js
dependencies: [
]

});
</script>
</body>
</html>
